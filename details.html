<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="css/common.css" />
  <link rel="stylesheet" type="text/css" href="css/index.css" />
  <link rel="stylesheet" type="text/css" href="css/details.css" />
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.bundle.js"></script>
  <script src="js/vue.js"></script>
  <script src="js/variable.js"></script>
  <script src="js/dbInit.js"></script>
  <script src="js/init.js"></script>
  <script src="js/dao.js"></script>
  <title>小米9</title>
</head>

<body>
  <div id='details'>
    <div class="header">
      <div class="container">
        <div class="row">
          <!-- 左边列表 -->
          <div class="col-md-8">
            <div class="row">
              <div class="col col-md-1"><a href="./index.html">小米商城</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">MIUI</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">loT</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">云服务</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">金融</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">有品</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">开放平台</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">政企服务</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">资质证照</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">协议规则</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">下载app</a></div>
              <div class="col col-md-1"><a href="JavaScript:;;">地区</a></div>
            </div>
          </div>
          <div class="col-md-4 header-right">
            <div class="row">
              <div class="col-md-2" v-if='loginUser'><a href="./self.html">{{ loginUser.name }}</a></div>
              <div class="col-md-2" v-if='loginUser'><a href="JavaScript:;;" @click="signOut()">退出</a></div>
              <div class="col-md-2" v-if='!loginUser'><a href="./login.html">登录</a></div>
              <div class="col-md-2" v-if='!loginUser'><a href="./login.html">注册</a></div>
              <div class="col-md-3"><a href="./order.html">我的订单</a></div>
              <div class="col-md-3"><a href="JavaScript:;;">消息通知</a></div>
              <div class="col-md-2"><a href="./cart.html">购物车</a></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 搜索栏 -->
    <div class="container search">
      <div class="row">
        <div class="col-md-9">
          <div class="row">
            <div class="col col-md-1"><a href="./index.html">
                <div class="logo"></div>
              </a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">小米手机</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">红米</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">电视</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">笔记本</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">家电</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">新品</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">路由器</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">智能硬件</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">服务</a></div>
            <div class="col col-md-1"><a href="JavaScript:;;">社区</a></div>
            <div class="col col-md-1"></div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="row">
            <div class="col col-md-9">
              <input type="text" placeholder="  小米8  小米MIX 2S">
            </div>
            <div class="col col-md-3">
              <input type="submit" class="sousuo" value="搜索" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="column search">
      <div class="container">
        <div class="row">
          <div class='col column-name'>{{ details.name }}</div>
          <div class='col other'>
            <div class="row">
              <div class="col"></div>
              <!-- 点击跳转概述页面    -->
              <div class="col-md-2"><a href="JavaScript:;;">概述</a></div>
              <div class="col-md-2"><a href="JavaScript:;;">参数</a></div>
              <div class="col-md-2"><a href="JavaScript:;;">F码通道</a></div>
              <div class="col-md-2"><a href="JavaScript:;;">用户评价</a></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="page-mian">
      <div class="container">
        <div class="row detail-main">
          <div class="col-md-6 detail-img">
            <img :src="details.image">
          </div>
          <div class="col-md-6 right-style">
            <h3>{{ details.name }}</h3>
            <p>
              <font class="orange-color">「6GB+128GB/8GB+256GB，限时赠价值149元无线充电宝，更享花呗3/6期免息」</font>全曲面轻薄设计，全息幻彩玻璃机身 /
              骁龙855旗舰处理器 / 20W无线闪充，标配27W有线快充 / 索尼4800万超广角微距三摄 / 极速屏下指纹解锁 / 多功能NFC
            </p>
            <p class="orange-color">小米自营</p>
            <p class="orange-color">
              <font>{{ details.price }}</font>元
            </p>
            <div class='gift'>
              <div>
                <div class="btn">赠品</div>赠小米无线充电宝
              </div>
              <div>
                <div class="btn">赠品</div>赠米粉卡
              </div>
            </div>
            <h4>选择版本</h4>
            <div class="row">
              <div class="col edition edition-sel">
                <span>6GB+64GB</span>
                <span>{{ details.price }}</span>元
              </div>
              <div class="col edition">
                <span>8GB+128GB </span>
                <span>3299元</span>
              </div>
              <div class="w-100"></div>
              <div class="col edition">
                <span>8GB+256GB </span>
                <span>3599元</span>
              </div>
              <div class="col"></div>
            </div>
            <h4>选择颜色</h4>
            <div class="row">
              <div class="col edition edition-sel">
                <span>全息幻彩紫</span>
              </div>
              <div class="col edition">
                <span>全息幻彩蓝</span>
              </div>
              <div class="w-100"></div>
              <div class="col edition">
                <span>深空灰</span>
              </div>
              <div class="col"></div>
            </div>
            <div class='amout'>
              <p><span>{{ details.name }} </span>全网通版 6GB+128GB 全息幻彩紫</p>
              <h3 class="orange-color">总计: <span>{{ details.price }}</span>元</h3>
            </div>
            <div><a @click="toShoppingCart()" class="btn-add">加入购物车</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer>
    <div>小米商城|MIUI|米聊|多看书城|小米路由器|视频电话|小米天猫店|小米淘宝直营店|小米网盟|小米移动|隐私政策|Select Region</div>
    <div>©mi.com 京ICP证110507号 京ICP备10046444号 京公网安备11010802020134号 京网文[2014]0059-0009号</div>
    <div>违法和不良信息举报电话：185-0130-1238，本网站所列数据，除特殊说明，所有数据均出自我司实验室测试</div>
  </footer>
</body>

</html>
<script>
  const details = new Vue({
    el: '#details',
    data: {
      loginUser: '',
      details: {
        name: '小米9',
        price: 3299,
        img: 'image/nav-80-111.png',
        image: 'image/detail-main1.jpg',
      }
    },
    created: function () {
      initDataBase();
      var me = this;
      UserDao.loadLoginUserInfo(function (success, loginInfo) {
        me.loginUser = loginInfo;
      });
      DetailDao.loadDetailsInfo(function (success, detailsInfo) {
        me.details = detailsInfo;
        window.document.title = detailsInfo.name;
      });
    },
    methods: {
      toShoppingCart: function () {
        console.log(this.details);
        var userId = this.loginUser ? this.loginUser.userId : '6666';
        var userName = this.loginUser ? this.loginUser.name : '6666';
        var carts = {
          id: createOnlyId(),
          userId: userId,
          userName: userName,
          name: this.details.name,
          price: this.details.price,
          img: this.details.img,
          num: 1,
          status: 1,
          selected: true,
        };
        CartDao.replaceCarts(carts, function (success) {
          location.href = './cart.html';
        })
      },
      signOut: function () {
        var signOutInfo = {
          id: '888888888',
          status: 0,
        }
        UserDao.replaceLoginUser(signOutInfo, function (success) {
          location.href = './login.html';
        })
      },
    }
  });
</script>